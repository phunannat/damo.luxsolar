<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LuxSolar.en</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">

    <style>
        /* Same styles as before */
    </style>
</head>

<body>
    <div class="container">
        <header class="d-flex flex-wrap justify-content-center py-3 mb-4 border-bottom">
            <a href="/" class="d-flex align-items-center mb-3 mb-md-0 me-md-auto link-body-emphasis text-decoration-none">LuxSolar.EN</a>
            <ul class="nav nav-pills">
                <li class="nav-item"><a href="index.html" class="nav-link active" aria-current="page">Home</a></li>
            </ul>
        </header>

        <div class="px-4 py-2 my-5 text-center">
            <img class="d-block mx-auto mb-4" src="buen.png" alt="" width="442" height="127">
            <h1 class="display-5 fw-bold text-body-emphasis">โปรแกรมการคำนวณระบบโซลาร์เซลล์</h1> <br />
        </div>


        <div class="px-4 py-2 text-center">
            <table class="table">
                <thead>
                    <tr>
                        <th scope="col">ลำดับ</th>
                        <th scope="col">ชื่อ</th>
                        <th scope="col">จำนวนวัตต์</th>
                        <th scope="col">จำนวนที่เลือก</th>
                    </tr>
                </thead>
                <tbody id="device-table-body">
                    <tr>
                        <th scope="row">1</th>
                        <td>หลอดไฟ LED</td>
                        <td>12 watt</td>
                        <td>
                            <div class="dropdown">
                                <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                    จำนวน
                                </button>
                                <ul class="dropdown-menu">
                                    <li><a class="dropdown-item" href="#" onclick="updateButton(this, 12)">1</a></li>
                                    <li><a class="dropdown-item" href="#" onclick="updateButton(this, 12)">2</a></li>
                                    <li><a class="dropdown-item" href="#" onclick="updateButton(this, 12)">3</a></li>
                                    <li><a class="dropdown-item" href="#" onclick="updateButton(this, 12)">4</a></li>
                                    <li><a class="dropdown-item" href="#" onclick="updateButton(this, 12)">5</a></li>
                                </ul>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <th scope="row">2</th>
                        <td>เครื่องฟอกอากาศ</td>
                        <td>20 watt</td>
                        <td>
                            <div class="dropdown">
                                <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                    จำนวน
                                </button>
                                <ul class="dropdown-menu">
                                    <li><a class="dropdown-item" href="#" onclick="updateButton(this, 20)">1</a></li>
                                    <li><a class="dropdown-item" href="#" onclick="updateButton(this, 20)">2</a></li>
                                    <li><a class="dropdown-item" href="#" onclick="updateButton(this, 20)">3</a></li>
                                    <li><a class="dropdown-item" href="#" onclick="updateButton(this, 20)">4</a></li>
                                    <li><a class="dropdown-item" href="#" onclick="updateButton(this, 20)">5</a></li>
                                </ul>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <th scope="row">3</th>
                        <td>ทีวี 32 นิ้ว</td>
                        <td>70 watt</td>
                        <td>
                            <div class="dropdown">
                                <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                    จำนวน
                                </button>
                                <ul class="dropdown-menu">
                                    <li><a class="dropdown-item" href="#" onclick="updateButton(this, 70)">1</a></li>
                                    <li><a class="dropdown-item" href="#" onclick="updateButton(this, 70)">2</a></li>
                                    <li><a class="dropdown-item" href="#" onclick="updateButton(this, 70)">3</a></li>
                                    <li><a class="dropdown-item" href="#" onclick="updateButton(this, 70)">4</a></li>
                                    <li><a class="dropdown-item" href="#" onclick="updateButton(this, 70)">5</a></li>
                                </ul>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <th scope="row">4</th>
                        <td>หม้อหุงข้าว 2 ลิตร</td>
                        <td>600 watt</td>
                        <td>
                            <div class="dropdown">
                                <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                    จำนวน
                                </button>
                                <ul class="dropdown-menu">
                                    <li><a class="dropdown-item" href="#" onclick="updateButton(this, 600)">1</a></li>
                                    <li><a class="dropdown-item" href="#" onclick="updateButton(this, 600)">2</a></li>
                                    <li><a class="dropdown-item" href="#" onclick="updateButton(this, 600)">3</a></li>
                                    <li><a class="dropdown-item" href="#" onclick="updateButton(this, 600)">4</a></li>
                                    <li><a class="dropdown-item" href="#" onclick="updateButton(this, 600)">5</a></li>
                                </ul>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <th scope="row">5</th>
                        <td>ไมโครเวฟ 20 ลิตร</td>
                        <td>800 watt</td>
                        <td>
                            <div class="dropdown">
                                <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                    จำนวน
                                </button>
                                <ul class="dropdown-menu">
                                    <li><a class="dropdown-item" href="#" onclick="updateButton(this, 800)">1</a></li>
                                    <li><a class="dropdown-item" href="#" onclick="updateButton(this, 800)">2</a></li>
                                    <li><a class="dropdown-item" href="#" onclick="updateButton(this, 800)">3</a></li>
                                    <li><a class="dropdown-item" href="#" onclick="updateButton(this, 800)">4</a></li>
                                    <li><a class="dropdown-item" href="#" onclick="updateButton(this, 800)">5</a></li>
                                </ul>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <th scope="row">6</th>
                        <td>หม้อทอดไร้น้ำมัน</td>
                        <td>1000 watt</td>
                        <td>
                            <div class="dropdown">
                                <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                    จำนวน
                                </button>
                                <ul class="dropdown-menu">
                                    <li><a class="dropdown-item" href="#" onclick="updateButton(this, 1000)">1</a></li>
                                    <li><a class="dropdown-item" href="#" onclick="updateButton(this, 1000)">2</a></li>
                                    <li><a class="dropdown-item" href="#" onclick="updateButton(this, 1000)">3</a></li>
                                    <li><a class="dropdown-item" href="#" onclick="updateButton(this, 1000)">4</a></li>
                                    <li><a class="dropdown-item" href="#" onclick="updateButton(this, 1000)">5</a></li>
                                </ul>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <br /> 
        </div>

        <div class="px-4 py-2 text-center">
            <button class="btn btn-outline-secondary btn-lg px-4 rounded-pill" type="button" onclick="addDevice()">เพิ่มอุปกรณ์เครื่องใช้ไฟฟ้า</button>
        </div><br /><br />

        <div class="px-4 py-2 text-center">
            <h2 class="fw-bold text-body-emphasis">วัตต์รวม : <span id="total-wattage">0</span> วัตต์ / ชั่วโมง</h2>
            <h3 class="fw-bold text-body-emphasis">ค่าไฟ <span id="cost-per-hour">0</span> บาท / ชั่วโมง : ค่าไฟ <span id="cost-per-day">0</span> บาท / วัน</h3>
        </div>

        <div class="px-4 py-2 text-center">
            <a id="next-button" class="btn btn-outline-secondary btn-lg px-4 rounded-pill disabled" type="button" href="homethree.html" onclick="storeData()">Next ></a>
        </div>

        <footer class="py-3 my-4">
          <ul class="px-4 py-2 text-center"></ul>
          <p class="text-center text-body-secondary"><br />© 2023 SCHOOL OF ENGINEERING<br /> BANGKOK UNIVERSITY</p>
      </footer>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
        <script>
            const wattages = [12, 20, 70, 600, 800, 1000];
            let quantities = Array(wattages.length).fill(0);
            const electricityRate = 4.5;

            function updateButton(element, watt) {
                const dropdown = element.closest('.dropdown');
                const button = dropdown.querySelector('.dropdown-toggle');
                button.textContent = ' ' + element.textContent;

                const rowIndex = Array.from(dropdown.closest('tbody').children).indexOf(dropdown.closest('tr'));
                quantities[rowIndex] = parseInt(element.textContent);

                calculateTotalWattage();
            }

            function calculateTotalWattage() {
                let total = 0;
                for (let i = 0; i < wattages.length; i++) {
                    total += wattages[i] * quantities[i];
                }
                document.getElementById('total-wattage').textContent = total;
                calculateCost(total);
                updateNextButtonState(total);
            }

            function calculateCost(totalWattage) {
                const costPerHour = (totalWattage / 1000) * electricityRate;
                const costPerDay = costPerHour * 24;

                document.getElementById('cost-per-hour').textContent = costPerHour.toFixed(2);
                document.getElementById('cost-per-day').textContent = costPerDay.toFixed(2);
            }

            function updateNextButtonState(totalWattage) {
                const nextButton = document.getElementById('next-button');
                if (totalWattage > 0) {
                    nextButton.classList.remove('disabled');
                    nextButton.removeAttribute('tabindex');
                    nextButton.removeAttribute('aria-disabled');
                } else {
                    nextButton.classList.add('disabled');
                    nextButton.setAttribute('tabindex', '-1');
                    nextButton.setAttribute('aria-disabled', 'true');
                }
            }

            function storeData() {
                const totalWattage = document.getElementById('total-wattage').textContent;
                const costPerHour = document.getElementById('cost-per-hour').textContent;
                const costPerDay = document.getElementById('cost-per-day').textContent;

                localStorage.setItem('totalWattage', totalWattage);
                localStorage.setItem('costPerHour', costPerHour);
                localStorage.setItem('costPerDay', costPerDay);
            }

            function displaySelectedRoom() {
                const roomType = localStorage.getItem('roomType');
                const roomSize = localStorage.getItem('roomSize');
                if (roomType && roomSize) {
                    document.getElementById('selected-room').textContent = `${roomType} ขนาด ${roomSize} ตารางเมตร`;
                }
            }

            function addDevice() {
                const deviceTableBody = document.getElementById('device-table-body');
                const newRow = document.createElement('tr');
                const index = wattages.length + 1;

                newRow.innerHTML = `
                    <th scope="row">${index}</th>
                    <td>เครื่องใช้ไฟฟ้าเพิ่มเติ่ม</td>
                    <td><input type="number" class="form-control" id="watt-${index}" placeholder="วัตต์ของเครื่องเครื่องใช้ไฟฟ้า" /></td>
                    <td>
                        <div class="dropdown">
                            <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                จำนวน
                            </button>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="#" onclick="updateNewDevice(this, ${index})">1</a></li>
                                <li><a class="dropdown-item" href="#" onclick="updateNewDevice(this, ${index})">2</a></li>
                                <li><a class="dropdown-item" href="#" onclick="updateNewDevice(this, ${index})">3</a></li>
                                <li><a class="dropdown-item" href="#" onclick="updateNewDevice(this, ${index})">4</a></li>
                                <li><a class="dropdown-item" href="#" onclick="updateNewDevice(this, ${index})">5</a></li>
                            </ul>
                        </div>
                    </td>
                `;
                
                deviceTableBody.appendChild(newRow);
                wattages.push(0); 
                quantities.push(0); 
            }

            function updateNewDevice(element, index) {
                const dropdown = element.closest('.dropdown');
                const button = dropdown.querySelector('.dropdown-toggle');
                button.textContent = ' ' + element.textContent;

                const wattInput = document.getElementById(`watt-${index}`);
                const watt = parseInt(wattInput.value) || 0;

                wattages[index - 1] = watt;
                quantities[index - 1] = parseInt(element.textContent);

                calculateTotalWattage();
            }

            document.addEventListener('DOMContentLoaded', function() {
                displaySelectedRoom();
            });
        </script>
    </body>
</html>
